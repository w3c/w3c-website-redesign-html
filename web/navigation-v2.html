<!doctype html>
<html dir="ltr" lang="en" class="no-js">

<head>
	<meta charset="utf-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<title>Global navigation v2 | W3C Redesign Prototypes</title>

	<meta http-equiv="x-ua-compatible" content="ie=edge">

	<meta property="og:description" name="description" content="Global navigation prototype for the W3C website redesign"/>

	<script src="dist/assets/js/libraries/fontfaceobserver.js"></script>

	<script>
		var myFont = new FontFaceObserver('Noto Sans');

		Promise.all([myFont.load()]).then(function () {
			document.documentElement.className += " fonts-loaded";
		});
	</script>

	<link rel="stylesheet" href="dist/assets/styles/core.css" media="screen"/>

	<!--
    CSS Mustard Cut
    Print (Edge doesn't apply to print otherwise)
    Edge, Chrome 39+, Opera 26+, Safari 9+, iOS 9+, Android ~5+, Android UCBrowser ~11.8+
    FF 47+
    -->
	<link rel="stylesheet" id="advanced-stylesheet" href="dist/assets/styles/advanced.css" media="
        only print,
        only all and (pointer: fine), only all and (pointer: coarse), only all and (pointer: none),
        only all and (min--moz-device-pixel-ratio:0) and (display-mode:browser), (min--moz-device-pixel-ratio:0) and (display-mode:fullscreen)
    ">

	<script>
		(function() {
			var linkEl = document.getElementById('advanced-stylesheet');
			if (window.matchMedia && window.matchMedia(linkEl.media).matches) {
				// var script = document.createElement('script');
				// script.src = 'dist/assets/js/main.js';
				// script.defer = true;
				// document.querySelector('head').appendChild(script);
				(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement);
			}
		})();
	</script>


	<style>
		/* Temporary prototype styles */
		.nav-lang,
		.global-header__login,
		#breadcrumb,
		.global-footer {display: none;}
	</style>


</head>

<body>
<div class="wrap">
	<nav aria-labelledby="skip-heading">
		<span id="skip-heading" class="visuallyhidden">Skip link and language options</span>
		<ul class="clean-list" role="list">
			<li>
				<a class="skip-link" href="#main"><span>Skip to content</span></a>
			</li>
			<li>
				<a class="skip-link" href="#lang"><span>Select language</span></a>
			</li>
		</ul>
	</nav>

	<header class="l-center global-header">
		<a class="logo" href="page.html">
			<svg xmlns="http://www.w3.org/2000/svg" focusable="false" aria-hidden="true" overflow="visible" viewBox="0 0 72 48" width="72px" height="48px"><defs/><g image-rendering="optimizeQuality" shape-rendering="geometricPrecision" text-rendering="geometricPrecision"><path fill="#FFF" fill-rule="evenodd" d="M0 0h72v48H0z" clip-rule="evenodd"/><path fill="#005A9C" d="M18.117 8.006l5.759 19.58 5.759-19.58h15.614v1.946L39.37 20.08c2.065.663 3.627 1.868 4.686 3.615 1.059 1.748 1.589 3.799 1.589 6.155 0 2.914-.775 5.363-2.324 7.348s-3.555 2.978-6.017 2.978c-1.854 0-3.469-.589-4.845-1.767-1.377-1.178-2.396-2.773-3.058-4.786l3.256-1.35c.477 1.218 1.106 2.178 1.887 2.879a3.993 3.993 0 002.76 1.052c1.112 0 2.052-.622 2.82-1.866.768-1.245 1.152-2.74 1.152-4.489 0-1.933-.411-3.429-1.231-4.488-.954-1.244-2.45-1.867-4.489-1.867h-1.588v-1.906l5.56-9.612h-6.712l-.382.65-8.163 27.548h-.397l-5.958-19.937-5.957 19.937h-.397L2.032 8.006h4.17l5.759 19.58 3.892-13.185-1.906-6.395h4.17z"/><path fill-rule="evenodd" d="M66.92 8.006c-.819 0-1.554.295-2.111.861-.591.6-.92 1.376-.92 2.178a3 3 0 00.887 2.128 2.979 2.979 0 002.145.912c.793 0 1.562-.321 2.161-.903.574-.557.887-1.3.887-2.136 0-.811-.321-1.57-.878-2.136a3 3 0 00-2.171-.904zm2.643 3.065c0 .701-.271 1.351-.768 1.832a2.671 2.671 0 01-1.892.777c-.675 0-1.342-.278-1.84-.785s-.777-1.157-.777-1.849.287-1.368.802-1.891a2.54 2.54 0 011.84-.751c.726 0 1.376.271 1.883.785.49.489.752 1.147.752 1.882zm-2.559-1.807h-1.3v3.445h.65V11.24h.642l.701 1.469h.726l-.769-1.57c.498-.102.785-.439.785-.929 0-.625-.472-.946-1.435-.946zm-.118.422c.608 0 .886.169.886.591 0 .405-.278.549-.87.549h-.549v-1.14h.533z" clip-rule="evenodd"/><g><path d="M61.807 7.825l.676 4.107-2.391 4.575s-.918-1.941-2.443-3.015c-1.285-.905-2.122-1.102-3.431-.832-1.681.347-3.587 2.357-4.419 4.835-.995 2.965-1.005 4.4-1.04 5.718-.056 2.113.277 3.362.277 3.362s-1.452-2.686-1.438-6.62c.009-2.808.451-5.354 1.75-7.867 1.143-2.209 2.842-3.535 4.35-3.691 1.559-.161 2.791.59 3.743 1.403 1 .854 2.01 2.721 2.01 2.721l2.356-4.696zM62.102 31.063s-1.057 1.889-1.715 2.617c-.659.728-1.837 2.01-3.292 2.651s-2.218.762-3.656.624c-1.437-.138-2.772-.97-3.24-1.317-.468-.347-1.664-1.369-2.34-2.322-.676-.953-1.733-2.859-1.733-2.859s.589 1.91.958 2.721c.212.467.864 1.894 1.789 3.136.863 1.159 2.539 3.154 5.086 3.604 2.547.451 4.297-.693 4.73-.97.433-.277 1.346-1.042 1.924-1.66.603-.645 1.174-1.468 1.49-1.962.231-.36.607-1.092.607-1.092l-.608-3.171z"/></g></g></svg>
			<span class="visuallyhidden">W3C homepage</span>
		</a>
		<a href="page.html" class="global-header__login with-icon--after with-icon--larger"><span>Sign in</span> <svg class="icon icon--larger" xmlns="http://www.w3.org/2000/svg" focusable="false" aria-hidden="true" viewBox="0 0 24 24" width="0.75em" height="0.75em"><path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2a7.2 7.2 0 01-6-3.22c.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08a7.2 7.2 0 01-6 3.22z"/></svg>
		</a>
		<button type="button" class="button button--ghost with-icon--after with-icon--larger" data-trigger="mobile-nav"></button>
	</header>

	<nav id="global-nav">
		<ul class="clean-list l-center" role="list">
			<li>
				<a href="page.html" class="nav-link">Home</a>
			</li>
			<li>
				<a href="page.html" class="nav-link has-children">Standards</a>
				<div class="nav__submenu">
					<ul class="clean-list" role="list">
						<li>
							<a href="page.html" class="nav-link">About W3C standards</a>
						</li>
						<li>
							<a href="page.html" class="nav-link">Technical reports</a>
						</li>
						<li>
							<a href="page.html" class="nav-link">Translations of technical reports</a>
						</li>
						<li>
							<a href="page.html" class="nav-link">Types of report we publish</a>
						</li>
						<li>
							<a href="page.html" class="nav-link">More about standards</a>
						</li>
					</ul>
				</div>
			</li>
			<li>
				<a href="page.html" class="nav-link has-children">Groups</a>
				<div class="nav__submenu">
					<ul class="clean-list" role="list">
						<li>
							<a href="page.html" class="nav-link">Find groups by industry</a>
						</li>
						<li>
							<a href="page.html" class="nav-link">Working groups</a>
						</li>
						<li>
							<a href="page.html" class="nav-link">Technical architecture group</a>
						</li>
						<li>
							<a href="page.html" class="nav-link">Advisory Board</a>
						</li>
						<li>
							<a href="page.html" class="nav-link has-children">Invited experts</a>
							<div class="nav__submenu">
								<ul class="clean-list" role="list">
									<li>
										<a href="page.html" class="nav-link">Directory of W3C invited experts</a>
									</li>
									<li>
										<a href="page.html" class="nav-link">Invited expert application</a>
									</li>
									<li>
										<a href="page.html" class="nav-link">Advisory expert and collaborator agreement</a>
									</li>
									<li>
										<a href="page.html" class="nav-link">Invited expert policies</a>
									</li>
								</ul>
							</div>
						</li>
						<li>
							<a href="page.html" class="nav-link has-children">Mailing lists</a>
							<div class="nav__submenu">
								<ul class="clean-list" role="list">
									<li>
										<a href="page.html" class="nav-link">Archives</a>
									</li>
									<li>
										<a href="page.html" class="nav-link">Search mailing lists</a>
									</li>
									<li>
										<a href="page.html" class="nav-link">Manage your subscriptions</a>
									</li>
									<li>
										<a href="page.html" class="nav-link">Email FAQs</a>
									</li>
									<li>
										<a href="page.html" class="nav-link">Posting guides</a>
									</li>
								</ul>
							</div>
						</li>
						<li>
							<a href="page.html" class="nav-link">More about groups</a>
						</li>
					</ul>
				</div>
			</li>
			<li>
				<a href="page.html" class="nav-link has-children">Get involved</a>
				<div class="nav__submenu">
					<ul class="clean-list" role="list">
						<li>
							<a href="page.html" class="nav-link has-children">Business Ecosystems</a>
							<div class="nav__submenu">
								<ul class="clean-list" role="list">
									<li>
										<a href="page.html" class="nav-link">Automotive and transportation</a>
									</li>
									<li>
										<a href="page.html" class="nav-link">Media and entertainment</a>
									</li>
									<li>
										<a href="page.html" class="nav-link">Publishing</a>
									</li>
									<li>
										<a href="page.html" class="nav-link">Web payments</a>
									</li>
									<li>
										<a href="page.html" class="nav-link">Web of Data</a>
									</li>
									<li>
										<a href="page.html" class="nav-link">Web and telecommunications</a>
									</li>
									<li>
										<a href="page.html" class="nav-link">Web of Things</a>
									</li>
								</ul>
							</div>
						</li>
						<li>
							<a href="page.html" class="nav-link has-children">Supporting W3C</a>
							<div class="nav__submenu">
								<ul class="clean-list" role="list">
									<li>
										<a href="page.html" class="nav-link">Donate now</a>
									</li>
									<li>
										<a href="page.html" class="nav-link">Global sponsorship</a>
									</li>
									<li>
										<a href="page.html" class="nav-link">More ways to support us</a>
									</li>
								</ul>
							</div>
						</li>
						<li>
							<a href="page.html" class="nav-link has-children">W3C Membership</a>
							<div class="nav__submenu">
								<ul class="clean-list" role="list">
									<li>
										<a href="page.html" class="nav-link">Membership home</a>
									</li>
									<li>
										<a href="page.html" class="nav-link">Membership fees</a>
									</li>
									<li>
										<a href="page.html" class="nav-link">Join W3C</a>
									</li>
									<li>
										<a href="page.html" class="nav-link">How to get an account</a>
									</li>
									<li>
										<a href="page.html" class="nav-link">More about W3C membership</a>
									</li>
								</ul>
							</div>
						</li>
						<li>
							<a href="page.html" class="nav-link has-children">Promote web standards</a>
							<div class="nav__submenu">
								<ul class="clean-list" role="list">
									<li>
										<a href="page.html" class="nav-link">Asset library and materials</a>
									</li>
								</ul>
							</div>
						</li>
					</ul>
				</div>
			</li>
			<li>
				<a href="page.html" class="nav-link has-children">Resources</a>
				<div class="nav__submenu">
					<ul class="clean-list" role="list">
						<li>
							<a href="page.html" class="nav-link">Standards</a>
						</li>
						<li>
							<a href="page.html" class="nav-link">Validators</a>
						</li>
						<li>
							<a href="page.html" class="nav-link has-children">Events</a>
							<div class="nav__submenu">
								<ul class="clean-list" role="list">
									<li>
										<a href="page.html" class="nav-link">Talks</a>
									</li>
									<li>
										<a href="page.html" class="nav-link">Workshops</a>
									</li>
									<li>
										<a href="page.html" class="nav-link">Meetings</a>
									</li>
									<li>
										<a href="page.html" class="nav-link">Conferences endorsed by W3C</a>
									</li>
								</ul>
							</div>
						</li>
						<li>
							<a href="page.html" class="nav-link">Tutorials and courses</a>
						</li>
						<li>
							<a href="page.html" class="nav-link">Podcasts and videos</a>
						</li>
						<li>
							<a href="page.html" class="nav-link">More resources</a>
						</li>
					</ul>
				</div>
			</li>
			<li>
				<a href="page.html" class="nav-link has-children">News and insights</a>
				<div class="nav__submenu">
					<ul class="clean-list" role="list">
						<li>
							<a href="page.html" class="nav-link">News</a>
						</li>
						<li>
							<a href="page.html" class="nav-link">Blog</a>
						</li>
						<li>
							<a href="page.html" class="nav-link">Press releases</a>
						</li>
						<li>
							<a href="page.html" class="nav-link">In the media</a>
						</li>
						<li>
							<a href="page.html" class="nav-link">Weekly newsletter</a>
						</li>
					</ul>
				</div>
			</li>
			<li>
				<a href="page.html" class="nav-link has-children">About</a>
				<div class="nav__submenu">
					<ul class="clean-list" role="list">
						<li>
							<a href="page.html" class="nav-link has-children">Our mission</a>
							<div class="nav__submenu">
								<ul class="clean-list" role="list">
									<li>
										<a href="page.html" class="nav-link">Accessibility</a>
									</li>
									<li>
										<a href="page.html" class="nav-link">Internationalization</a>
									</li>
									<li>
										<a href="page.html" class="nav-link">Privacy</a>
									</li>
									<li>
										<a href="page.html" class="nav-link">Security</a>
									</li>
								</ul>
							</div>
						</li>
						<li>
							<a href="page.html" class="nav-link has-children">Contact</a>
							<div class="nav__submenu">
								<ul class="clean-list" role="list">
									<li>
										<a href="page.html" class="nav-link">Beihang University <span lang="zh-Hans">(W3C中国)</span></a>
									</li>
									<li>
										<a href="page.html" class="nav-link">ERCIM</a>
									</li>
									<li>
										<a href="page.html" class="nav-link">Keio University</a>
									</li>
									<li>
										<a href="page.html" class="nav-link">MIT</a>
									</li>
								</ul>
							</div>
						</li>
						<li>
							<a href="page.html" class="nav-link">Leadership</a>
						</li>
						<li>
							<a href="page.html" class="nav-link">People</a>
						</li>
						<li>
							<a href="page.html" class="nav-link">Evangelists</a>
						</li>
						<li>
							<a href="page.html" class="nav-link">Careers</a>
						</li>
						<li>
							<a href="page.html" class="nav-link">Help</a>
						</li>
						<li>
							<a href="page.html" class="nav-link">Learn more about W3C</a>
						</li>
					</ul>

				</div>
			</li>
		</ul>
	</nav>

	<nav id="lang" aria-labelledby="nav-lang-heading" class="nav-lang">
		<span id="nav-lang-heading" class="txt-body-alt">Language options</span>
		<div class="l-cluster">
			<ul class="clean-list" role="list">
				<li>English</li>
				<li><a href="/fr" hreflang="fr">French</a></li>
				<li><a href="/zh-Hans" hreflang="zh-Hans">Simplified Chinese</a></li>
				<li><a href="/ja" hreflang="ja">Japanese</a></li>
			</ul>
		</div>
	</nav>

	<nav id="breadcrumb" aria-labelledby="nav-breadcrumb-heading" class="l-center">
		<span id="nav-breadcrumb-heading" class="visuallyhidden">Breadcrumb</span>
		<div class="l-cluster">
			<ol class="breadcrumbs clean-list" role="list">
				<li><a href="/">Home</a></li>
				<li><a href="page.html">Page</a></li>
				<li><a href="page.html">Another page</a></li>
				<li><a href="page.html">Page</a></li>
				<li><a href="page.html" aria-current="page">Global navigation</a></li>
			</ol>
		</div>
	</nav>

	<main id="main">
		<h1 class="txt-mercury">Global navigation - v2</h1>
		<p><a href="index.html">Back to prototypes index</a></p>
	</main>
</div>
<footer class="global-footer">
	<div class="l-center">
		<div class="l-cluster">
			<ul class="clean-list" role="list">
				<li><a href="https://www.w3.org/">Home</a></li>
				<li><a href="page.html">Contact</a></li>
				<li><a href="page.html">Help</a></li>
				<li><a href="page.html">Sponsor and donate</a></li>
				<li><a href="page.html">Privacy policy</a></li>
				<li><a href="page.html">Legal</a></li>
				<li><a href="page.html">System status</a></li>
			</ul>
		</div>
		<a class="social-links__item" href="https://twitter.com/W3C">
			<svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" focusable="false" aria-hidden="true" width="20px" height="20px"><defs></defs><path fill="currentColor" d="M23.954 4.569a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.691 8.094 4.066 6.13 1.64 3.161a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.061a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.937 4.937 0 004.604 3.417 9.868 9.868 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.054 0 13.999-7.496 13.999-13.986 0-.209 0-.42-.015-.63a9.936 9.936 0 002.46-2.548l-.047-.02z"></path></svg>
			<span class="visuallyhidden">Find us on Twitter</span>
		</a>
	</div>
</footer>

<script>

	(function () {

		// https://developer.mozilla.org/en-US/docs/Web/API/Element/closest#Polyfill
		if (!Element.prototype.matches) {
			Element.prototype.matches =
				Element.prototype.msMatchesSelector ||
				Element.prototype.webkitMatchesSelector;
		}

		if (!Element.prototype.closest) {
			Element.prototype.closest = function(s) {
				var el = this;

				do {
					if (Element.prototype.matches.call(el, s)) return el;
					el = el.parentElement || el.parentNode;
				} while (el !== null && el.nodeType === 1);
				return null;
			};
		}

		// Get the nav
		var nav = document.querySelector('#global-nav');

		// Get the nav toggle button
		var mobileNavToggler = document.querySelector('[data-trigger="mobile-nav"]');

		// Get all links in nav with class of "has children"
		var parentLinks = [].slice.call(nav.querySelectorAll('a.has-children'));

		// Get the different nav levels
		var levelOneLi = [].slice.call(document.querySelectorAll('#global-nav > ul > li'));
		var levelTwoLi = [].slice.call(document.querySelectorAll('#global-nav > ul > li > .nav__submenu > ul > li'));

		// Get all submenus
		var subMenuArray = [].slice.call(nav.querySelectorAll('.nav__submenu'));

		// Menu icon
		var menuIcon = '<svg class="icon icon--larger" xmlns="http://www.w3.org/2000/svg" focusable="false" aria-hidden="true" viewBox="0 0 24 24" width="0.75em" height="0.75em"><path id="menu-icon" d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/><path id="close-icon" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>';

		// I18N for 'Menu' button text
		let openText = '<span class="visuallyhidden">Open</span> Menu';
		if (document.documentElement.lang === 'fr') {
			openText = '<span class="visuallyhidden">Ouvrir le</span> Menu';
		} else if (document.documentElement.lang === 'ja') {
			openText = 'メニュー<span class="visuallyhidden">を開く</span>';
		} else if (document.documentElement.lang === 'zh-Hans') {
			openText = '<span class="visuallyhidden">打开</span>菜单';
		}

		// I18N for 'Close' button text
		let closeText = 'Close <span class="visuallyhidden">Menu</span>';
		if (document.documentElement.lang === 'fr') {
			closeText = '<span class="visuallyhidden">Fermer le</span> Menu';
		} else if (document.documentElement.lang === 'ja') {
			closeText = '<span class="visuallyhidden">メニュー</span>を閉じる';
		} else if (document.documentElement.lang === 'zh-Hans') {
			closeText = '关闭<span class="visuallyhidden">菜单</span>';
		}

		// I18N for 'Back' button value
		let backText = 'Back ';
		if (document.documentElement.lang === 'fr') {
			backText = 'Retour '
		} else if (document.documentElement.lang === 'ja') {
			backText = '戻る '
		} else if (document.documentElement.lang === 'zh-Hans') {
			backText = '返回 '
		}

		// Function to close all open submenus
		var closeSubmenus = function () {
			var submenuTriggers = [].slice.call(nav.querySelectorAll('[data-trigger]'));
			submenuTriggers.forEach(function (trigger) {
				trigger.setAttribute('aria-expanded', 'false');
				trigger.parentElement.querySelector('.nav__submenu').setAttribute('aria-hidden', 'true');
			});
		}

		// Function to close all open level 2 menus
		var closeLevelTwoMenus = function () {
			var levelTwoTriggers = [].slice.call(nav.querySelectorAll('[data-trigger="level-two"]'));
			levelTwoTriggers.forEach(function (trigger) {
				trigger.setAttribute('aria-expanded', 'false');
				trigger.parentElement.querySelector('.nav__submenu').setAttribute('aria-hidden', 'true');
			});
		}

		// Toggle mobile navigation
		var toggleMobileNav = function () {

			if (mobileNavToggler && nav) {

				mobileNavToggler.innerHTML = openText + menuIcon;
				mobileNavToggler.setAttribute('aria-expanded', 'false');
				nav.setAttribute('aria-hidden', 'true');

				document.addEventListener('click', function (event) {

					if (event.target.matches('[data-trigger="mobile-nav"]')) {

						if (event.target.getAttribute('aria-expanded') === 'false') {

							event.target.setAttribute('aria-expanded', 'true');
							mobileNavToggler.innerHTML = closeText + menuIcon;
							nav.setAttribute('aria-hidden', 'false');

						} else {

							event.target.setAttribute('aria-expanded', 'false');
							mobileNavToggler.innerHTML = openText + menuIcon;
							nav.setAttribute('aria-hidden', 'true');
							closeSubmenus();

						}

					}

				}, false);

			}

		}

		// Media query event handler
		var mq = window.matchMedia('(min-width: 1024px)');
		mq.addListener(WidthChange);
		WidthChange(mq);

		// Media query change
		function WidthChange(mq) {
			if (!(mq.matches)) {
				toggleMobileNav();
			} else {
				mobileNavToggler.setAttribute('aria-expanded', 'true');
				nav.setAttribute('aria-hidden', 'false');
			}
		}

		parentLinks.forEach(function (item, index) {

			// Clone the link
			var clonedLink = item.cloneNode(true);
			// Get the inner text content
			var linkText = item.textContent + '&nbsp;';

			// Create an equivalent button element with the link text
			var toggleButton = document.createElement('button');
			toggleButton.setAttribute('type', 'button');
			toggleButton.innerHTML = linkText + '<svg class="icon nav-mobile" xmlns="http://www.w3.org/2000/svg" focusable="false" aria-hidden="true" viewBox="0 0 6 10" width="0.75em" height="0.75em"><path class="arrow-right-ltr" d="M1.269 9.616l4.594-4.434a.415.415 0 000-.616L1.27.132a.451.451 0 00-.638 0L.137.609a.415.415 0 000 .616L3.09 4.076l.752.799-.687.747-3.02 2.914a.415.415 0 000 .616l.495.477a.463.463 0 00.638-.013z"/><path class="arrow-left-ltr" d="M1.269 9.616l4.594-4.434a.415.415 0 000-.616L1.27.132a.451.451 0 00-.638 0L.137.609a.415.415 0 000 .616L3.09 4.076l.752.799-.687.747-3.02 2.914a.415.415 0 000 .616l.495.477a.463.463 0 00.638-.013z" transform="rotate(180 3 4.876)" /></svg><svg class="icon nav-wide" xmlns="http://www.w3.org/2000/svg" focusable="false" aria-hidden="true" viewBox="0 0 6 10" width="0.75em" height="0.75em"><path class="arrow-down" d="M1.269 9.616l4.594-4.434a.415.415 0 000-.616L1.27.132a.451.451 0 00-.638 0L.137.609a.415.415 0 000 .616L3.09 4.076l.752.799-.687.747-3.02 2.914a.415.415 0 000 .616l.495.477a.463.463 0 00.638-.013z" transform="rotate(90 3 4.876)"></path><path class="arrow-up" d="M1.269 9.616l4.594-4.434a.415.415 0 000-.616L1.27.132a.451.451 0 00-.638 0L.137.609a.415.415 0 000 .616L3.09 4.076l.752.799-.687.747-3.02 2.914a.415.415 0 000 .616l.495.477a.463.463 0 00.638-.013z" transform="rotate(270 3 4.876)"></path></svg>';

			// Get the submenu
			var submenu = item.parentNode.querySelector('.nav__submenu');

			// Get list in submenu
			var submenuFirstChild = item.parentNode.querySelector('.nav__submenu > *');

			// Insert cloned link ahead of the list
			submenu.insertBefore(clonedLink, submenuFirstChild);

			// Replace the link with the button
			item.parentNode.replaceChild(toggleButton, item);

			// Create submenu 'Back' button
			var closeSubmenuButton = document.createElement('button');
			closeSubmenuButton.setAttribute('type', 'button');
			closeSubmenuButton.setAttribute('data-close', 'level');
			closeSubmenuButton.setAttribute('class', 'with-icon--before');
			closeSubmenuButton.innerHTML = '<svg class="icon" xmlns="http://www.w3.org/2000/svg" focusable="false" aria-hidden="true" viewBox="0 0 6 10" width="0.75em" height="0.75em"><path class="arrow-right-ltr" d="M1.269 9.616l4.594-4.434a.415.415 0 000-.616L1.27.132a.451.451 0 00-.638 0L.137.609a.415.415 0 000 .616L3.09 4.076l.752.799-.687.747-3.02 2.914a.415.415 0 000 .616l.495.477a.463.463 0 00.638-.013z"/><path class="arrow-left-ltr" d="M1.269 9.616l4.594-4.434a.415.415 0 000-.616L1.27.132a.451.451 0 00-.638 0L.137.609a.415.415 0 000 .616L3.09 4.076l.752.799-.687.747-3.02 2.914a.415.415 0 000 .616l.495.477a.463.463 0 00.638-.013z" transform="rotate(180 3 4.876)" /></svg> ' + backText;

			// Insert submenu 'Back' button into DOM
			submenu.appendChild(closeSubmenuButton);

		});

		// Add attributes needed for dropdown functionality
		for (var i = 0; i < subMenuArray.length; i++) {
			subMenuArray[i].setAttribute('aria-hidden', 'true');
		}

		levelOneLi.forEach(function (li) {
			var button = li.querySelector('button');
			if (button) {
				button.setAttribute('aria-expanded', 'false');
				button.setAttribute('data-trigger', 'level-one');
			}
		});

		levelTwoLi.forEach(function (li) {
			var button = li.querySelector('button');
			if (button) {
				button.setAttribute('aria-expanded', 'false');
				button.setAttribute('data-trigger', 'level-two');
			}
		});

		// Level one toggle functionality
		var levelOneTriggers = [].slice.call(nav.querySelectorAll('[data-trigger="level-one"]'));

		if (levelOneTriggers.length > 0) {

			document.addEventListener('click', function (event) {
				if (event.target.matches('[data-trigger="level-one"]')) {

					var targetMenu = event.target.parentElement.querySelector('.nav__submenu');
					var prevMenu = targetMenu.parentElement.parentElement.parentElement;
					if (event.target.getAttribute('aria-expanded') === 'false') {

						closeSubmenus();
						event.target.setAttribute('aria-expanded', 'true');
						targetMenu.setAttribute('aria-hidden', 'false');
						targetMenu.style.minHeight = prevMenu.offsetHeight + 'px';

					} else {

						event.target.setAttribute('aria-expanded', 'false');
						targetMenu.setAttribute('aria-hidden', 'true');

					}

				}

				if (event.target.matches('[data-close="level"]')) {

					event.target.parentElement.setAttribute('aria-hidden', 'true');
					event.target.closest('li').querySelector('[data-trigger]').setAttribute('aria-expanded', 'false');

				}
			});

		}

		// Level two toggle functionality
		var levelTwoTriggers = [].slice.call(nav.querySelectorAll('[data-trigger="level-two"]'));

		if (levelTwoTriggers.length > 0) {

			document.addEventListener('click', function (event) {

				if (event.target.matches('[data-trigger="level-two"]')) {

					var targetMenu = event.target.parentElement.querySelector('.nav__submenu');
					var prevMenu = targetMenu.parentElement.parentElement.parentElement;

					if (event.target.getAttribute('aria-expanded') == 'false') {

						closeLevelTwoMenus();
						event.target.setAttribute('aria-expanded', 'true');
						targetMenu.setAttribute('aria-hidden', 'false');
						targetMenu.style.minHeight = prevMenu.offsetHeight + 'px';

					} else {

						event.target.setAttribute('aria-expanded', 'false');
						targetMenu.setAttribute('aria-hidden', 'true');

					}

				}

			});

		}

		// Escape key functionality to close nav menus
		document.addEventListener('keyup', function (event) {
			if (event.defaultPrevented) {
				return;
			}

			var key = event.key || event.keyCode;
			if (key === 'Escape' || key === 'Esc' || key === 27) {


				var levelOneTrigger = nav.querySelector('[data-trigger="level-one"][aria-expanded="true"]');
				var levelTwoTrigger = nav.querySelector('[data-trigger="level-two"][aria-expanded="true"]');

				if (levelTwoTrigger) {

					var levelTwoTarget = levelTwoTrigger.parentElement.querySelector('.nav__submenu');
					levelTwoTrigger.setAttribute('aria-expanded', 'false');
					levelTwoTarget.setAttribute('aria-hidden', 'true');

				} else if (levelOneTrigger) {

					var levelOneTarget = levelOneTrigger.parentElement.querySelector('.nav__submenu');
					levelOneTrigger.setAttribute('aria-expanded', 'false');
					levelOneTarget.setAttribute('aria-hidden', 'true');

				} else if (mobileNavToggler.getAttribute('aria-expanded') === 'true') {

					mobileNavToggler.setAttribute('aria-expanded', 'false');
					nav.setAttribute('aria-hidden', 'true');

				}

			}

		});

	})();


</script>

</body>

</html>